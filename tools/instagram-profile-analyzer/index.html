<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>ุชุญููู ุญุณุงุจ ุฅูุณุชุบุฑุงู (@username) ูุฌุงููุง โ ููุฏููุฒ/ุตูุงุน ูุญุชูู/ูุชุงุฌุฑ | MarketAPro</title>
  <meta name="description" content="ุฃุฏุงุฉ ุนุฑุจูุฉ ูุชุญููู ุญุณุงุจ ุฅูุณุชุบุฑุงู ุฎูุงู ุฏูููุฉ: ุชุดุฎูุต ุงุญุชุฑุงูู ููููุฏููุฒ ูุตูุงุน ุงููุญุชูู ูุงููุชุงุฌุฑ + Engagement + ุฌุงูุฒูุฉ ุงูุชุนุงูู/ุงูููู/ุงูุจูุน + ุฎุทุฉ 7โ14 ููู." />
  <meta name="keywords" content="ุชุญููู ุญุณุงุจ ุงูุณุชุบุฑุงู, ูุญุต ุญุณุงุจ ุงูุณุชุบุฑุงู, instagram profile analyzer, ูุนุฏู ุงูุชูุงุนู ุงูุณุชุบุฑุงู, ุฌุงูุฒูุฉ ุงูุชุนุงูู, ุชุญููู ุญุณุงุจ ููุฏูู, ุชุญููู ุญุณุงุจ ูุชุฌุฑ" />
  <link rel="canonical" href="https://marketapro.com/tools/instagram-profile-analyzer/" />

  <link rel="stylesheet" href="/style.css" />

  <style>
    /* ุณุชุงูู ูุญูู ูุถูุงู ุซุจุงุช ุงูุตูุญุฉ */
    .mini{padding:14px;border-radius:16px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.02)}
    .mini label{display:block;color:rgba(255,255,255,.75);font-weight:900;margin-bottom:6px;font-size:13px}
    .mini input,.mini select,.mini textarea{
      width:100%;padding:12px 12px;border-radius:14px;border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.02);color:#e8f0ff;outline:none
    }
    .mini textarea{resize:vertical;min-height:90px}
    .note2{color:rgba(255,255,255,.7);font-size:13px;margin:8px 0 0;line-height:1.8}
    .grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
    @media(max-width:900px){.grid2{grid-template-columns:1fr}}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:12px}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 14px;border-radius:14px;font-weight:900;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.03);color:#fff;cursor:pointer}
    .btn.primary{border:0;background:linear-gradient(135deg,#06b6d4,#38bdf8);color:#00131a}
    .btn.secondary{background:transparent}
    .steps{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .step{padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.02);color:rgba(255,255,255,.7);font-weight:900;font-size:12px}
    .step.on{color:#00131a;border:0;background:linear-gradient(135deg,#06b6d4,#38bdf8)}
    .loader{
      display:none;align-items:center;gap:10px;margin-top:12px;
      padding:12px;border-radius:16px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.02)
    }
    .dot{width:8px;height:8px;border-radius:99px;background:rgba(56,189,248,.9);animation:b .9s infinite alternate}
    .dot:nth-child(2){animation-delay:.15s}
    .dot:nth-child(3){animation-delay:.3s}
    @keyframes b{from{opacity:.3;transform:translateY(0)}to{opacity:1;transform:translateY(-4px)}}

    .debug{
      display:none;margin-top:12px;
      border:1px solid rgba(239,68,68,.45);
      background:rgba(239,68,68,.08);
      padding:12px;border-radius:14px;
      color:#ffd5d5;font-weight:800;font-size:13px;
      white-space:pre-wrap
    }

    .report{display:none;margin-top:12px}
    .kpis{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:12px}
    @media(max-width:980px){.kpis{grid-template-columns:1fr}}
    .kpi{padding:14px;border-radius:16px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.02)}
    .kpi strong{display:block;font-size:18px}
    .kpi span{color:rgba(255,255,255,.7);font-size:13px}

    .badge{
      display:inline-block;margin-top:10px;
      padding:6px 10px;border-radius:999px;
      background:rgba(6,182,212,.14);
      border:1px solid rgba(6,182,212,.25);
      color:#bff6ff;font-weight:900;font-size:12px;
    }

    .box{margin-top:12px}
    .list{margin:8px 0 0;padding-right:18px;color:rgba(255,255,255,.75);line-height:1.9}
    .split{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
    @media(max-width:980px){.split{grid-template-columns:1fr}}

    .meter{height:10px;border-radius:999px;background:rgba(255,255,255,.06);overflow:hidden;margin-top:10px;border:1px solid rgba(255,255,255,.08)}
    .meter > div{height:100%;width:0%}

    .toast{
      position:fixed;inset-inline-start:16px;bottom:16px;
      background:rgba(0,0,0,.65);border:1px solid rgba(255,255,255,.12);
      padding:10px 12px;border-radius:14px;color:#fff;display:none;z-index:9999
    }
  </style>
</head>

<body>
<header class="header">
  <div class="container header-inner">
    <a class="brand" href="/" aria-label="ุงูุนูุฏุฉ ููุฑุฆูุณูุฉ">
      <div class="brand-badge" aria-hidden="true"></div>
      <div>
        <p class="brand-title">MarketAPro</p>
        <p class="brand-sub">Instagram Profile Analyzer</p>
      </div>
    </a>
    <nav class="nav" aria-label="ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ">
      <a href="/">ุงูุฑุฆูุณูุฉ</a>
      <a class="active" href="/tools/">ุงูุฃุฏูุงุช</a>
      <a href="/news/">ุงูููุงูุงุช</a>
    </nav>
  </div>
</header>

<main class="container section">
  <div class="card">
    <h1 style="margin:0 0 8px;font-size:28px;line-height:1.4">ุชุญููู ุญุณุงุจ ุฅูุณุชุบุฑุงู ุงูุงุญุชุฑุงูู</h1>
    <p class="note2" style="margin-top:0">
      ุชุดุฎูุต ูุชุบููุฑ ุญุณุจ ููุน ุงูุญุณุงุจ: <strong>ููุฏูู/ูุงุดู</strong> โ <strong>ุตุงูุน ูุญุชูู</strong> โ <strong>ูุชุฌุฑ</strong>.
      (ุงูุฃุฏุงุฉ ูุง ุชุทูุจ ุชุณุฌูู ุฏุฎูู ููุง API โ ุงููุชุงุฆุฌ ุชุนุชูุฏ ุนูู ุจูุงูุงุช ููุดูุฑุงุชู)
    </p>

    <div class="steps">
      <span class="step on" id="step1">1) ุฅุฏุฎุงู ุงูููุฒุฑ</span>
      <span class="step" id="step2">2) ุชุฃููุฏ ุงูุจูุงูุงุช</span>
      <span class="step" id="step3">3) ุงูุชูุฑูุฑ</span>
    </div>

    <form id="analyzerForm" class="grid2" style="margin-top:12px">
      <div class="mini">
        <label for="username">@ุงุณู ุงููุณุชุฎุฏู</label>
        <input id="username" type="text" placeholder="ูุซุงู: marketapro ุฃู @marketapro" autocomplete="off" required />
        <p class="note2">ุงูุชุจ ุงูููุฒุฑ ููุท (ุจุฏูู ุฑุงุจุท).</p>
      </div>

      <div class="mini">
        <label for="acctType">ููุน ุงูุญุณุงุจ</label>
        <select id="acctType" required>
          <option value="model">ููุฏูู / ูุงุดู / ุชุตููุฑ</option>
          <option value="creator">ุตุงูุน ูุญุชูู / ูุคุซุฑ</option>
          <option value="store">ูุชุฌุฑ / ุจุฒูุณ</option>
        </select>
        <p class="note2">ุณูุคุซุฑ ุนูู ุงูููุงุฑูุฉ ูุงูุชูุตูุงุช.</p>
      </div>

      <div class="mini" style="grid-column:1/-1">
        <div class="row" style="margin-top:0">
          <button id="analyzeBtn" class="btn primary" type="submit">๐ ุชุญููู ุงูุญุณุงุจ</button>
          <button id="resetBtn" class="btn secondary" type="button">ูุณุญ</button>
          <span class="badge">ุจุฏูู ุชุณุฌูู</span>
          <span class="badge">ุชุดุฎูุต + ุฎุทุฉ</span>
        </div>

        <div class="loader" id="loader" aria-live="polite">
          <div style="display:flex;gap:6px">
            <span class="dot"></span><span class="dot"></span><span class="dot"></span>
          </div>
          <div style="color:rgba(255,255,255,.75);font-weight:900" id="loaderText">ุฌุงุฑู ุชุฌููุฒ ุงูุชุญูููโฆ</div>
        </div>

        <div class="debug" id="debugBox"></div>
      </div>

      <!-- STEP 2 -->
      <div class="mini" id="confirmBox" style="grid-column:1/-1;display:none">
        <strong style="display:block;margin-bottom:8px">โ ุงูุฎุทูุฉ 2: ุฃุฏุฎู ุจูุงูุงุช ููุดูุฑุงุชู (ูุฃุฑูุงู ุฏูููุฉ)</strong>

        <div class="grid2">
          <div>
            <label for="followers">ุนุฏุฏ ุงููุชุงุจุนูู</label>
            <input id="followers" type="number" min="1" placeholder="ูุซุงู: 12500" />
            <p class="note2">ุงูุณุฎู ูู ุตูุญุฉ ุญุณุงุจู.</p>
          </div>

          <div>
            <label for="goal">ูุฏูู</label>
            <select id="goal">
              <option value="engagement">ุฒูุงุฏุฉ ุงูุชูุงุนู</option>
              <option value="followers">ุฒูุงุฏุฉ ุงููุชุงุจุนูู</option>
              <option value="sales">ูุจูุนุงุช / ุชุนุงููุงุช</option>
            </select>
            <p class="note2">ุณูุถุจุท ุงูุชูุตูุงุช ุญุณุจ ุงููุฏู.</p>
          </div>

          <div class="mini" style="grid-column:1/-1">
            <label for="likesList">ูุงููุงุช ุขุฎุฑ 6โ12 ููุดูุฑ</label>
            <textarea id="likesList" placeholder="ูุซุงู: 700, 650, 820, 590, 760, 810"></textarea>
            <p class="note2">ุงูุตู ุงูุฃุฑูุงู ุจููุงุตู ุฃู ุฃุณุทุฑ.</p>
          </div>

          <div class="mini" style="grid-column:1/-1">
            <label for="commentsList">ุชุนูููุงุช ุขุฎุฑ 6โ12 ููุดูุฑ</label>
            <textarea id="commentsList" placeholder="ูุซุงู: 12, 9, 15, 11, 8, 14"></textarea>
            <p class="note2">ุงูุตู ุงูุฃุฑูุงู ุจููุงุตู ุฃู ุฃุณุทุฑ.</p>
          </div>

          <div class="mini" style="grid-column:1/-1">
            <div class="row" style="margin-top:0">
              <button id="buildReportBtn" class="btn primary" type="button">โ ุงุนุฑุถ ุงูุชูุฑูุฑ</button>
              <button id="copyBtn" class="btn secondary" type="button">ูุณุฎ ุงูุชูุฑูุฑ</button>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- REPORT -->
  <div class="card report" id="report">
    <div style="display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;align-items:flex-start">
      <div>
        <h2 style="margin:0 0 6px">ุงูุชูุฑูุฑ ุงูููุงุฆู</h2>
        <p class="note2" id="reportTitle" style="margin:0">โ</p>
        <p class="note2" id="benchmarkText" style="margin:8px 0 0">โ</p>
      </div>
      <div style="min-width:220px;text-align:left">
        <div style="font-weight:1000;font-size:28px;line-height:1" id="verdict">โ</div>
        <div class="meter"><div id="meterFill"></div></div>
        <p class="note2" style="margin-top:8px" id="scoreText">โ</p>
      </div>
    </div>

    <div class="kpis">
      <div class="kpi"><strong id="kFollowers">0</strong><span>ุงููุชุงุจุนูู</span></div>
      <div class="kpi"><strong id="kAvgLikes">0</strong><span>ูุชูุณุท ุงูุฅุนุฌุงุจุงุช</span></div>
      <div class="kpi"><strong id="kAvgComments">0</strong><span>ูุชูุณุท ุงูุชุนูููุงุช</span></div>
      <div class="kpi"><strong id="kER">0%</strong><span>Engagement</span></div>
    </div>

    <div class="split">
      <div class="mini box">
        <strong>ุงูุชุดุฎูุต</strong>
        <p class="note2" id="diagnosis" style="margin-top:8px"></p>
        <ul class="list" id="bullets"></ul>
      </div>

      <div class="mini box">
        <strong>ุฎุทูุฉ ุนูููุฉ ููุฃุณุจูุน ุงููุงุฏู</strong>
        <p class="note2" id="plan" style="margin-top:8px"></p>
        <ol class="list" id="recs"></ol>
      </div>
    </div>

    <div class="mini box">
      <strong>ุฑูุงุจุท ุฃุฏูุงุช ูููุฏุฉ</strong>
      <ul class="list">
        <li><a href="/tools/best-time-to-post-instagram/">ุฃูุถู ููุช ูููุดุฑ ุนูู ุฅูุณุชุบุฑุงู</a></li>
        <li><a href="/tools/instagram-engagement-calculator/">ุญุงุณุจุฉ ูุนุฏู ุงูุชูุงุนู (Engagement)</a></li>
      </ul>
      <p class="note2">ููุงุญุธุฉ: ุงูุฃุฑูุงู ููุง ูุจููุฉ ุนูู ุจูุงูุงุช ููุดูุฑุงุชู ุงูุชู ุฃุฏุฎูุชูุงุ ุจุฏูู ุชุณุฌูู ุฏุฎูู.</p>
    </div>
  </div>
</main>

<footer class="footer">
  <div class="container">ยฉ 2025 MarketAPro โ By Viva Media Creative</div>
</footer>

<div class="toast" id="toast">ุชู โ</div>

<script>
  const $ = (id)=>document.getElementById(id);

  function toast(msg){
    const t = $('toast');
    t.textContent = msg;
    t.style.display = 'block';
    clearTimeout(window.__t);
    window.__t = setTimeout(()=>t.style.display='none', 1400);
  }

  function showError(msg){
    const box = $('debugBox');
    box.style.display = 'block';
    box.textContent = "ุฎุทุฃ:\n" + msg;
  }
  function clearError(){
    const box = $('debugBox');
    box.style.display = 'none';
    box.textContent = "";
  }

  function setStep(n){
    $('step1').classList.toggle('on', n===1);
    $('step2').classList.toggle('on', n===2);
    $('step3').classList.toggle('on', n===3);
  }

  function sanitizeUsername(v){
    v = (v||"").trim().replace(/\s+/g,'');
    if(!v) return "";
    if(v.startsWith("https://")) v = v.split("/").filter(Boolean).pop() || v;
    if(v.startsWith("@")) v = v.slice(1);
    v = v.replace(/[^a-zA-Z0-9._]/g,'');
    return v.toLowerCase();
  }

  // ูุฑุงุกุฉ ุฃุฑูุงู ุฐููุฉ (ุชุชุนุงูู ูุน 5,366 ุฃู 5.366 ูุขูุงู)
  function parseNums(str){
    if(!str) return [];
    str = String(str).replace(/ุ/g, ',');
    const tokens = str.split(/[\n\r\t]+|(?:\s*,\s*)|(?:\s{2,})/);

    const out = [];
    for (let t of tokens){
      t = String(t).trim();
      if(!t) continue;

      if (/^\d{1,3}(,\d{3})+$/.test(t)) t = t.replace(/,/g,'');
      if (/^\d{1,3}(\.\d{3})+$/.test(t)) t = t.replace(/\./g,'');

      t = t.replace(/[^\d.]/g,'');
      if(!t) continue;

      const n = Number(t);
      if(Number.isFinite(n)) out.push(n);
    }
    return out;
  }

  function avg(arr){
    if(!arr.length) return 0;
    return arr.reduce((a,b)=>a+b,0)/arr.length;
  }

  function clamp(n,min,max){ return Math.max(min, Math.min(max,n)); }

  function scoreLabel(score){
    if(score>=85) return "ููุชุงุฒ";
    if(score>=70) return "ููู";
    if(score>=55) return "ูุชูุณุท";
    return "ุถุนูู";
  }

  function scoreColor(score){
    if(score>=75) return "linear-gradient(135deg, rgba(34,197,94,.95), rgba(56,189,248,.65))";
    if(score>=55) return "linear-gradient(135deg, rgba(250,204,21,.95), rgba(56,189,248,.45))";
    return "linear-gradient(135deg, rgba(239,68,68,.95), rgba(56,189,248,.35))";
  }

  function benchmarks(type){
    if(type === "model") return {min:2.5, max:4.5, note:"ููููุฏููุฒ/ุงููุงุดู ุนุงุฏุฉ 2.5%โ4.5% ููุญุณุงุจุงุช ุงูุตุบูุฑุฉ ูุงููุชูุณุทุฉ."};
    if(type === "creator") return {min:1.8, max:3.8, note:"ูุตูุงุน ุงููุญุชูู ุนุงุฏุฉ 1.8%โ3.8% ุญุณุจ ุงููุฌุงู ูุงูุญุฌู."};
    return {min:1.2, max:3.0, note:"ูููุชุงุฌุฑ ุนุงุฏุฉ 1.2%โ3.0% (ูุฒูุฏ ูุน UGC/Reviews)."};
  }

  function calcScore(type, er, commentRate){
    const b = benchmarks(type);
    const norm = clamp((er - b.min) / (b.max - b.min), 0, 1);
    let score = Math.round(35 + norm * 60);
    if(commentRate >= 0.12) score += 3;
    if(commentRate < 0.05) score -= 6;
    return clamp(score, 0, 100);
  }

  function verdictFrom(type, goal, er, commentRate){
    if(type==="model"){
      if(er>=4 && commentRate>=0.12) return "ุฌุงูุฒ ููุชุนุงูู ุจููุฉ โ";
      if(er>=3) return "ุฌุงูุฒ ููุชุนุงูู (ูุชูุณุท) โ";
      if(er>=1.8) return "ูุญุชุงุฌ ุชุญุณูู ูุจู ุงูุชุนุงูู โ๏ธ";
      return "ุบูุฑ ุฌุงูุฒ ููุชุนุงูู ุญุงูููุง โ";
    }
    if(type==="creator"){
      if(er>=3.5) return "ูุงุจู ููููู ุจุณุฑุนุฉ โ";
      if(er>=2.2) return "ููู ุฌูุฏ ููู ุบูุฑ ุซุงุจุช โ๏ธ";
      return "ูุญุชุงุฌ ุฅุนุงุฏุฉ ุถุจุท โ";
    }
    // store
    if(er>=2.8 && commentRate>=0.08) return "ุฌูุฏ ููุจูุน (ูุน ุชุญุณูู ุงูุชุญููู) โ";
    if(er>=1.6) return "ูุชูุณุท โ ูุญุชูู ุชุฑููุฌู ุฒุงุฆุฏ โ๏ธ";
    return "ุถุนูู โ ูุญุชุงุฌ ุชุบููุฑ ูุญุชูู โ";
  }

  function diagnosisPack(type, goal, er, commentRate){
    let diagnosis="", plan="", bullets=[], recs=[];

    if(type==="model"){
      if(er>=4 && commentRate>=0.12){
        diagnosis = "ุญุณุงุจู ููู ุจุตุฑููุง + ุชูุงุนู ุญูุงุฑู ุฌูุฏ. ูุฐุง ูุฌุนู ุงูุจุฑุงูุฏุงุช ุชุซู ุจุงูุญุณุงุจ ุฃูุซุฑ.";
        plan = "ุงูุฃุณุจูุน ุงููุงุฏู: 3 Reels (BTS + Pose Tutorial + Before/After) + ุณุคุงู ูุงุถุญ ูู ููุงูุฉ ูู Reel.";
        bullets = [
          "ุงุณุชูุฑ ุนูู ููุณ ุงูุณุชุงูู ุงูุจุตุฑู (ูููุฉ ุซุงุจุชุฉ).",
          "ุญุงูุธ ุนูู ุงูุฑุฏ ุนูู ุงูุชุนูููุงุช ุฎูุงู ุฃูู ุณุงุนุฉ.",
          "ุฒูุฏ ุงููStory Poll/Question ูุฑูุน ุงูุชุนูููุงุช."
        ];
        recs = [
          "Reel 1: BTS (ุชุตููุฑ/ููุงููุณ) + ุณุคุงู.",
          "Reel 2: Pose tutorial (3 ุจูุฒุงุช) + CTA ุญูุธ.",
          "Reel 3: Before/After (ููู/ุฅุถุงุกุฉ) + CTA ุชุนููู."
        ];
      } else if(er>=3){
        diagnosis = "ุญุณุงุจู ุฌุฐุงุจ ุจุตุฑููุง ูุงูุชูุงุนู ุฌูุฏุ ููู ุงูุชุนูููุงุช ุชุญุชุงุฌ ุฏูุน ุฃููู ููุธูุฑ ุงูุชูุงุนู ูู(Community) ูููุณ ูุงูู ููุท.";
        plan = "ูู ููุดูุฑ ููุชูู ุจุณุคุงู A/B + ุฑุฏ ุฎูุงู ุฃูู ุณุงุนุฉ ูุฑูุน ุงูุชุนูููุงุช.";
        bullets = [
          "ุงูุชุนูููุงุช ูู ููุชุงุญ ุชุนุงูู ุฃูุถู (ุจุฑุงูุฏุงุช ุชุญุจ ุงูุญูุงุฑ).",
          "ุงุณุชุฎุฏู ุณุคุงู ุงุฎุชูุงุฑ ุจุฏู ุณุคุงู ููุชูุญ.",
          "ุซุจูุช ุชูููุชูู ูุดุฑ ููุฏุฉ 14 ููู."
        ];
        recs = [
          "CTA A/B: ุฃู ููู ุฃูุถู A ุฃู Bุ",
          "CTA: ุงุฎุชุฑ 1/2 ูู ุงูุชุนูููุงุช.",
          "Story ูููู: ุณุคุงู ุณุฑูุน + ูุชุงุฆุฌ."
        ];
      } else if(er>=1.8){
        diagnosis = "ุงูุชูุงุนู ูุชูุณุทุ ุบุงูุจูุง ุงููุญุชูู ุฌููู ููู Hook ุถุนูู ุฃู ุงููุดุฑ ุบูุฑ ุซุงุจุชุ ููุง ูููู ูุฑุต ุงูุชุนุงูู.";
        plan = "5 Reels ูุตูุฑุฉ (7โ10 ุซูุงู) ูุน Hook ูุตูู ุนูู ุงูุดุงุดุฉ + CTA ุญูุธ/ุชุนููู.";
        bullets = [
          "ุงููHook ุฃูู 2 ุซุงููุฉ ูู ุงููุงุฑู.",
          "ุงุณุชุฎุฏู ูุต ูุงุถุญ ุนูู ุงูููุฏูู.",
          "ุญุงูุธ ุนูู 4โ5 ูุดุฑุงุช ุฃุณุจูุนููุง."
        ];
        recs = [
          "Reel: 3 ุจูุฒุงุช ุณุฑูุนุฉ + ูุต ุนูู ุงูุดุงุดุฉ.",
          "Carousel: ุฃูุถู 5 ููุทุงุช (ูููุฉ).",
          "Story: ุชุตููุช ูููู."
        ];
      } else {
        diagnosis = "ุงูุชูุงุนู ููุฎูุถุ ูุจู ุงูุชุนุงูู ูุญุชุงุฌ ุฑูุน ุงููุตูู ูุงูุชุนูููุงุช ุนุจุฑ ูุญุชูู ูุงุจู ูููุดุงุฑูุฉ ูุงูุญูุธ.";
        plan = "14 ููู: Reel ูููููุง + Story ุณุคุงู ูููููุง + Carousel ูููุฉ ูุฑุชูู ุฃุณุจูุนููุง.";
        bullets = [
          "ุงุจุชุนุฏ ุนู ููุดูุฑุงุช ุนุดูุงุฆูุฉ.",
          "ุงุจุฏุฃ ุจุณูุณูุฉ ุฃุณุจูุนูุฉ ุซุงุจุชุฉ.",
          "ุฑูุฒ ุนูู ุงููุญุชูู ุงููุงุจู ููุญูุธ."
        ];
        recs = [
          "Reel ูููู: ูุจู/ุจุนุฏ ุฃู ููุงููุณ.",
          "Carousel ูุฑุชูู: ูุตุงุฆุญ ุจูุฒ/ุฅุถุงุกุฉ.",
          "Story ูููู: ุณุคุงู + Poll."
        ];
      }
    }

    if(type==="creator"){
      if(er>=3.5){
        diagnosis = "ุชูุงุนู ูููุ ุงูุฃูุถู ุงูุขู ุชุซุจูุช ููุนูู ูุญุชูู ูุชูุฑุงุฑููุง ูุชุญููู ุงูุชูุงุนู ุฅูู ููู ูุณุชูุฑ.";
        plan = "7 ุฃูุงู: Reel ูููููุง + Carousel ูููุฉ ููููู + Story ุชุตููุช ูููููุง.";
        bullets = [
          "ูุฑูุฑ ุฃูุถู ููุน ูุญุชูู ุจุฏู ุงูุชุดุชุช.",
          "CTA ุญูุธ ูุฑูุน ุงูุงูุชุดุงุฑ.",
          "ุงุฎุชุจุฑ ุชูููุชูู ููุท."
        ];
        recs = [
          "Reel ูููู: Hook ููู + ููุทุฉ ูุงุญุฏุฉ.",
          "Carousel: ุฎุทูุงุช/ูุงุฆูุฉ ูุงุจูุฉ ููุญูุธ.",
          "Story: ุณุคุงู/ุชุตููุช ูููููุง."
        ];
      } else if(er>=2.2){
        diagnosis = "ุงููุชุงุฆุฌ ุฌูุฏุฉ ููู ุชุญุชุงุฌ ูุธุงู ูุดุฑ + CTA ุฃููู ูุฑูุน ุงูุชุนูููุงุช ูุงูุญูุธ.";
        plan = "7 ุฃูุงู: 4 Reels + 2 Carousel + CTA ุณุคุงู ูุจุงุดุฑ + ุงูุฑุฏ ุฎูุงู ุฃูู ุณุงุนุฉ.";
        bullets = [
          "ุถุน CTA ูุงุญุฏ ูุงุถุญ ููู ููุดูุฑ.",
          "ูุง ุชุบููุฑ ุงูููุด ูู ููู.",
          "ุงุฎุชุจุฑ ุดูุฑูุง ูุงูููุง ูุจู ุงูุญูู."
        ];
        recs = [
          "4 Reels: (ุฎุทุฃ ุดุงุฆุน + ุญู).",
          "2 Carousel: (ูููุฉ ูุงุจูุฉ ููุญูุธ).",
          "Story ูููู: ุณุคุงู."
        ];
      } else {
        diagnosis = "ุงูุชูุงุนู ุถุนูู ููุงุฑูุฉ ุจุงูููุงูุณููุ ุงููุดููุฉ ุบุงูุจูุง ูู Hook ุฃู ุงุฎุชูุงุฑ ููุน ูุญุชูู ุบูุฑ ููุงุณุจ.";
        plan = "14 ููู: Reels ูุตูุฑุฉ ูุงุจูุฉ ูููุดุงุฑูุฉ + CTA ุญูุธ + ุงุฎุชุจุงุฑ ุชูููุชูู ุซุงุจุชูู.";
        bullets = [
          "ุงุจุฏุฃ ูู ูุดููุฉ ุงูุฌูููุฑ ูุง ูู ููุณู.",
          "ุงุฎุชุตุฑ ุงููุญุชูู: 7โ12 ุซุงููุฉ.",
          "ุงุฌุนู ุงููุต ุนูู ุงูุดุงุดุฉ ูุงุถุญ."
        ];
        recs = [
          "Reel ูููู: ูุจู/ุจุนุฏ ุฃู ููุทุฉ ูุงุญุฏุฉ.",
          "Carousel ุฃุณุจูุนููุง: ุฃุฎุทุงุก ุดุงุฆุนุฉ.",
          "Story: ุณุคุงู ูููู."
        ];
      }
    }

    if(type==="store"){
      if(er>=2.8 && commentRate>=0.08){
        diagnosis = "ุงูุชูุงุนู ุฌูุฏ โ ููุชุงุฒ. ููู ุงููุจูุนุงุช ุชุญุชุงุฌ ูุญุชูู (ุญู ูุดููุฉ + ุฅุซุจุงุช + ุนุฑุถ) ูููุณ ุนุฑูุถ ููุท.";
        plan = "ุงูุฃุณุจูุน ุงููุงุฏู: 3 ููุดูุฑุงุช ูููุฉ + 1 ุนุฑุถ + 2 Story FAQ + CTA ูุงุถุญ (ุงุทูุจ/DM).";
        bullets = [
          "ุงุฏูุฌ UGC/Reviews ูุฑูุน ุงูุซูุฉ.",
          "ุงุฌุนู CTA ูุงุถุญ (ุงุทูุจ ุงูุขู / DM).",
          "ูููู ุงูุนุฑูุถ ุงููุจุงุดุฑุฉ."
        ];
        recs = [
          "Carousel: ูุดููุฉ/ุญู + ุงูููุชุฌ.",
          "Reel: ุชุฌุฑุจุฉ/ูุฑุงุฌุนุฉ ุนููู.",
          "Story: FAQ + ุฑุฏูุฏ."
        ];
      } else if(er>=1.6){
        diagnosis = "ุงูุชูุงุนู ูุชูุณุทุ ุบุงูุจูุง ุงููุงุณ ุชุดุงูุฏ ููู ูุง ุชุชูุงุนู ูุฃู ุงููุญุชูู ุชุฑููุฌู ุฃูุซุฑ ูู ุงูุชุนูููู.";
        plan = "ุงูุฃุณุจูุน ุงููุงุฏู: 2 Carousel ุชุนููููุฉ + 2 Reels ุชุฌุฑุจุฉ/ูุฑุงุฌุนุฉ + ููุดูุฑ ุนุฑุถ ูุงุญุฏ ููุท.";
        bullets = [
          "ุงุณุชุจุฏู โุงุดุชุฑู ุงูุขูโ ุจู โูุฐู ูุดููุฉ ูุญููุงโ.",
          "ุงุณุชุฎุฏู UGC ูุฏููู.",
          "Story ูููู ุฃูุถู ูู ููุดูุฑ ุจูุน."
        ];
        recs = [
          "Reel: ูุจู/ุจุนุฏ (ูุชูุฌุฉ).",
          "Carousel: ุฏููู ุงุฎุชูุงุฑ/ููุงุฑูุฉ.",
          "Story: ุฃุณุฆูุฉ + ุฅุฌุงุจุงุช."
        ];
      } else {
        diagnosis = "ุงูุชูุงุนู ููุฎูุถุ ูุจู ุงูุจูุน ูุฌุจ ุจูุงุก ุซูุฉ ุนุจุฑ ูุญุชูู ูููุฉ ูUGC ููุฑุงุฌุนุงุช.";
        plan = "14 ููู: ููููู ูููุฉ + ููู UGC/Review + ููู Reel ุดุฑุญ ุณุฑูุน + Story ุฃุณุฆูุฉ ูููููุง.";
        bullets = [
          "ุงุจุฏุฃ ุจุจูุงุก ุซูุฉ ูุจู ุงูุทูุจ.",
          "ุงุฌุนู ุงููุญุชูู โูููุฏโ ูุง โุฏุนุงุฆูโ.",
          "ุซุจูุช ุฌุฏูู ุฃุณุจูุนูู."
        ];
        recs = [
          "UGC/Review ูุฑุชูู ุฃุณุจูุนููุง.",
          "Carousel ูููุฉ ูุฑุชูู.",
          "Reel ุดุฑุญ ุณุฑูุน 3 ูุฑุงุช."
        ];
      }
    }

    // ุชุนุฏูู ุจุณูุท ุญุณุจ ุงููุฏู
    if(goal==="sales"){
      bullets.unshift("ูููุจูุนุงุช: ุถู ุฏููู ุงุฌุชูุงุนู (ูุชุงุฆุฌ/ูุฑุงุฌุนุงุช) + CTA DM/ูุงุชุณุงุจ ูุฑุฉ ุฃุณุจูุนููุง.");
    } else if(goal==="followers"){
      bullets.unshift("ูุฒูุงุฏุฉ ุงููุชุงุจุนูู: ุฑููุฒ ุนูู ูุญุชูู ูุงุจู ูููุดุงุฑูุฉ + CTA ูุชุงุจุนุฉ ูุงุถุญ.");
    } else {
      bullets.unshift("ูุฑูุน ุงูุชูุงุนู: ุณุคุงู ูุงุถุญ + CTA ุญูุธ/ุชุนููู + ุฑุฏ ุณุฑูุน ุฃูู ุณุงุนุฉ.");
    }

    return {diagnosis, plan, bullets, recs};
  }

  async function copyText(txt){
    try{
      await navigator.clipboard.writeText(txt);
      toast("ุชู ูุณุฎ ุงูุชูุฑูุฑ โ");
    }catch(e){
      alert("ุชุนุฐุฑ ุงููุณุฎ ุชููุงุฆููุง. ุงูุณุฎ ูุฏูููุง:\n\n" + txt);
    }
  }

  function setMeter(score){
    const fill = $('meterFill');
    fill.style.width = score + "%";
    fill.style.background = scoreColor(score);
  }

  function fmt(n){ return Number(n||0).toLocaleString('ar'); }

  // ========= Events =========
  window.addEventListener('DOMContentLoaded', ()=>{
    const form = $('analyzerForm');

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      clearError();

      const u = sanitizeUsername($('username').value);
      if(!u){
        showError("ุงูุชุจ ุงุณู ูุณุชุฎุฏู ุตุญูุญ ูุซู: @marketapro");
        return;
      }

      $('loader').style.display = "flex";
      $('loaderText').textContent = "ุฌุงุฑู ุชุฌููุฒ ุงูุชุญูููโฆ";

      setTimeout(()=> $('loaderText').textContent = "ุฌุงุฑู ุชุฌููุฒ ุงูููุงุฑูุฉ ุญุณุจ ููุน ุงูุญุณุงุจโฆ", 550);

      setTimeout(()=>{
        $('loader').style.display = "none";
        $('confirmBox').style.display = "block";
        setStep(2);
        toast("ุชู ุชุฌููุฒ ุงูุชุญููู โ ุฃููู ุงูุจูุงูุงุช ููุญุตูู ุนูู ุชูุฑูุฑ ุฏููู โ");
        window.scrollTo({top: $('confirmBox').offsetTop - 90, behavior:"smooth"});
      }, 1150);
    });

    $('resetBtn').addEventListener('click', ()=>{
      $('username').value="";
      $('followers').value="";
      $('likesList').value="";
      $('commentsList').value="";
      $('goal').value="engagement";
      $('confirmBox').style.display="none";
      $('report').style.display="none";
      $('loader').style.display="none";
      clearError();
      setStep(1);
      toast("ุชู ุงููุณุญ");
      window.scrollTo({top:0, behavior:"smooth"});
    });

    $('buildReportBtn').addEventListener('click', ()=>{
      clearError();

      const u = sanitizeUsername($('username').value);
      const type = $('acctType').value;
      const goal = $('goal').value;

      const followers = parseInt(($('followers').value||"0"),10);
      const likesArr = parseNums($('likesList').value);
      const comArr = parseNums($('commentsList').value);

      if(!u){ showError("ุงุณู ุงููุณุชุฎุฏู ุบูุฑ ุตุญูุญ."); return; }
      if(!followers || followers < 1){ showError("ุฃุฏุฎู ุนุฏุฏ ุงููุชุงุจุนูู."); return; }
      if(likesArr.length < 6){ showError("ุฃุฏุฎู ูุงููุงุช 6 ููุดูุฑุงุช ุนูู ุงูุฃูู."); return; }
      if(comArr.length < 6){ showError("ุฃุฏุฎู ุชุนูููุงุช 6 ููุดูุฑุงุช ุนูู ุงูุฃูู."); return; }

      const avgLikes = avg(likesArr);
      const avgComments = avg(comArr);

      // ุญูุงูุฉ ูู ุฅุฏุฎุงู ุฎุงุทุฆ
      if(avgComments > avgLikes * 0.6){
        showError(
          "ุงูุฃุฑูุงู ุชุจุฏู ุบูุฑ ููุทููุฉ: ูุชูุณุท ุงูุชุนูููุงุช ูุฑุชูุน ุฌุฏูุง ููุงุฑูุฉ ุจุงููุงููุงุช.\n" +
          "ุชุฃูุฏ ุฃูู ุฃุฏุฎูุช ุงูุชุนูููุงุช ูุฃุฑูุงู ูููุตูุฉ (ูุซุงู: 12, 8, 15...) ูููุณ ุฑูููุง ูุซู 5,366."
        );
        return;
      }

      const likeRate = (avgLikes / followers) * 100;
      const commentRate = (avgComments / followers) * 100;
      const er = likeRate + commentRate;

      const b = benchmarks(type);
      const score = calcScore(type, er, commentRate);
      const verdict = verdictFrom(type, goal, er, commentRate);
      const pack = diagnosisPack(type, goal, er, commentRate);

      $('reportTitle').textContent = `@${u} โ Engagement: ${er.toFixed(2)}%`;
      $('benchmarkText').textContent = `${b.note} (ูุชูุฌุชู: ${er.toFixed(2)}%)`;
      $('verdict').textContent = verdict;
      $('scoreText').textContent = `Score: ${score}/100 โ ${scoreLabel(score)}`;
      setMeter(score);

      $('kFollowers').textContent = fmt(followers);
      $('kAvgLikes').textContent = fmt(Math.round(avgLikes));
      $('kAvgComments').textContent = fmt(Math.round(avgComments));
      $('kER').textContent = er.toFixed(2) + "%";

      $('diagnosis').textContent = pack.diagnosis;
      $('plan').textContent = pack.plan;

      const bullets = $('bullets'); bullets.innerHTML="";
      pack.bullets.slice(0,6).forEach(x=>{
        const li = document.createElement('li');
        li.textContent = x;
        bullets.appendChild(li);
      });

      const recs = $('recs'); recs.innerHTML="";
      pack.recs.slice(0,6).forEach(x=>{
        const li = document.createElement('li');
        li.textContent = x;
        recs.appendChild(li);
      });

      $('report').style.display = "block";
      setStep(3);
      toast("ุชู ุฅูุดุงุก ุงูุชูุฑูุฑ ุงูููุงุฆู โ");
      window.scrollTo({top: $('report').offsetTop - 85, behavior:"smooth"});

      // ูุต ูููุณุฎ
      window.__reportText =
`MarketAPro โ ุชุญููู ุญุณุงุจ ุฅูุณุชุบุฑุงู (@${u})

ููุน ุงูุญุณุงุจ: ${type==="model"?"ููุฏูู/ูุงุดู":type==="creator"?"ุตุงูุน ูุญุชูู":"ูุชุฌุฑ"}
ุงููุฏู: ${goal==="sales"?"ูุจูุนุงุช/ุชุนุงููุงุช":goal==="followers"?"ุฒูุงุฏุฉ ุงููุชุงุจุนูู":"ุฒูุงุฏุฉ ุงูุชูุงุนู"}

ุงููุชุงุจุนูู: ${followers}
ูุชูุณุท ูุงููุงุช: ${Math.round(avgLikes)}
ูุชูุณุท ุชุนูููุงุช: ${Math.round(avgComments)}
Engagement: ${er.toFixed(2)}%

ุงูุญูู: ${verdict}
Score: ${score}/100 โ ${scoreLabel(score)}

ุงูุชุดุฎูุต:
${pack.diagnosis}

ุฎุทูุฉ ุงูุฃุณุจูุน ุงููุงุฏู:
${pack.plan}

ููุงุท ูููุฉ:
- ${pack.bullets.slice(0,6).join("\n- ")}

ุฑูุงุจุท:
- ุฃูุถู ููุช ูููุดุฑ: https://marketapro.com/tools/best-time-to-post-instagram/
- ุญุงุณุจุฉ ุงูุชูุงุนู: https://marketapro.com/tools/instagram-engagement-calculator/
`;
    });

    $('copyBtn').addEventListener('click', ()=>{
      if(!window.__reportText){ showError("ุฃูุดุฆ ุงูุชูุฑูุฑ ุฃูููุง ุซู ุงูุณุฎู."); return; }
      copyText(window.__reportText);
    });
  });
</script>
</body>
</html>
